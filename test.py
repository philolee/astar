# -*- coding=utf-8

import os
import cube_summary_crawler


def get_last_crawled_cube_id():
    files = os.listdir(cube_summary_crawler.DATA_PATH)
    files.sort(reverse=True)
    print(files)
    if len(files) != 0:
        pos = files[0].index('_')
        if pos == -1:
            print("file name error: %s", files[0])
        first = files[0][0:pos]
        return first


def main():

    s = '{"id":100230,"name":"名不惊人誓不休","symbol":"ZH100328","description":"看来取个好名字就能跑赢大部分个股","active_flag":true,"star":0,"market":"cn","owner_id":9279819025,"created_at":1420298299395,"updated_at":1466733333804,"last_rb_id":18799564,"daily_gain":-0.42,"monthly_gain":4.74,"total_gain":93.61,"net_value":1.9361,"rank_percent":97.52,"annualized_gain_rate":42.27,"bb_rate":9.99,"following":false,"follower_count":1,"view_rebalancing":{"id":18799564,"status":"success","cube_id":100230,"prev_bebalancing_id":18707532,"category":"sys_rebalancing","exe_strategy":"market_all","created_at":1466733333804,"updated_at":1466733333804,"cash_value":0.00732268,"cash":0.38,"error_code":null,"error_message":"你上一笔调仓已成交。","error_status":null,"holdings":[{"stock_id":1003442,"weight":7.68,"segment_name":"计算机","segment_id":368479,"stock_name":"任子行","stock_symbol":"SZ300311","segment_color":"#5588cc","proactive":false,"volume":0.0070131,"textname":"undefined(SZ300311)","url":"/S/SZ300311"},{"stock_id":1000576,"weight":6.46,"segment_name":"纺织服装","segment_id":368485,"stock_name":"上海三毛","stock_symbol":"SH600689","segment_color":"#e05173","proactive":false,"volume":0.00605867,"textname":"undefined(SH600689)","url":"/S/SH600689"},{"stock_id":1000689,"weight":3.68,"segment_name":"化工","segment_id":368481,"stock_name":"神马股份","stock_symbol":"SH600810","segment_color":"#5ea180","proactive":false,"volume":0.00701638,"textname":"undefined(SH600810)","url":"/S/SH600810"},{"stock_id":1002023,"weight":4,"segment_name":"通信","segment_id":368480,"stock_name":"二六三","stock_symbol":"SZ002467","segment_color":"#5db15d","proactive":false,"volume":0.00608638,"textname":"undefined(SZ002467)","url":"/S/SZ002467"},{"stock_id":1003506,"weight":5.64,"segment_name":"计算机","segment_id":368479,"stock_name":"赢时胜","stock_symbol":"SZ300377","segment_color":"#5588cc","proactive":false,"volume":0.00251646,"textname":"undefined(SZ300377)","url":"/S/SZ300377"},{"stock_id":1002242,"weight":5.73,"segment_name":"纺织服装","segment_id":368485,"stock_name":"乔治白","stock_symbol":"SZ002687","segment_color":"#e05173","proactive":false,"volume":0.00758824,"textname":"undefined(SZ002687)","url":"/S/SZ002687"},{"stock_id":1001653,"weight":3.84,"segment_name":"化工","segment_id":368481,"stock_name":"南岭民爆","stock_symbol":"SZ002096","segment_color":"#5ea180","proactive":false,"volume":0.0042203,"textname":"undefined(SZ002096)","url":"/S/SZ002096"},{"stock_id":1001600,"weight":10.38,"segment_name":"建筑材料","segment_id":368482,"stock_name":"兔宝宝","stock_symbol":"SZ002043","segment_color":"#a4a461","proactive":false,"volume":0.01453194,"textname":"undefined(SZ002043)","url":"/S/SZ002043"},{"stock_id":1003216,"weight":4.71,"segment_name":"计算机","segment_id":368479,"stock_name":"银之杰","stock_symbol":"SZ300085","segment_color":"#5588cc","proactive":false,"volume":0.00366429,"textname":"undefined(SZ300085)","url":"/S/SZ300085"},{"stock_id":1000383,"weight":3.65,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"好当家","stock_symbol":"SH600467","segment_color":"#dbbd45","proactive":false,"volume":0.01574218,"textname":"undefined(SH600467)","url":"/S/SH600467"},{"stock_id":1003280,"weight":9.2,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"量子高科","stock_symbol":"SZ300149","segment_color":"#dbbd45","proactive":false,"volume":0.01023093,"textname":"undefined(SZ300149)","url":"/S/SZ300149"},{"stock_id":1001910,"weight":2.55,"segment_name":"传媒","segment_id":1800927,"stock_name":"天神娱乐","stock_symbol":"SZ002354","segment_color":"#9966dd","proactive":false,"volume":0.00061903,"textname":"undefined(SZ002354)","url":"/S/SZ002354"},{"stock_id":1002137,"weight":5.88,"segment_name":"食品饮料","segment_id":368478,"stock_name":"好想你","stock_symbol":"SZ002582","segment_color":"#ecad32","proactive":false,"volume":0.00283583,"textname":"undefined(SZ002582)","url":"/S/SZ002582"},{"stock_id":1002122,"weight":3.94,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"唐人神","stock_symbol":"SZ002567","segment_color":"#dbbd45","proactive":false,"volume":0.00584899,"textname":"undefined(SZ002567)","url":"/S/SZ002567"},{"stock_id":1000944,"weight":4.49,"segment_name":"轻工制造","segment_id":368484,"stock_name":"喜临门","stock_symbol":"SH603008","segment_color":"#e0b256","proactive":false,"volume":0.0041209,"textname":"undefined(SH603008)","url":"/S/SH603008"},{"stock_id":1001752,"weight":1.29,"segment_name":"计算机","segment_id":368479,"stock_name":"二三四五","stock_symbol":"SZ002195","segment_color":"#5588cc","proactive":false,"volume":0.00199125,"textname":"undefined(SZ002195)","url":"/S/SZ002195"},{"stock_id":1000474,"weight":6.75,"segment_name":"房地产","segment_id":368483,"stock_name":"万家文化","stock_symbol":"SH600576","segment_color":"#d9633b","proactive":false,"volume":0.00681168,"textname":"undefined(SH600576)","url":"/S/SH600576"},{"stock_id":1001847,"weight":5.31,"segment_name":"纺织服装","segment_id":368485,"stock_name":"星期六","stock_symbol":"SZ002291","segment_color":"#e05173","proactive":false,"volume":0.00645184,"textname":"undefined(SZ002291)","url":"/S/SZ002291"},{"stock_id":1002169,"weight":4.44,"segment_name":"家用电器","segment_id":368476,"stock_name":"蒙发利","stock_symbol":"SZ002614","segment_color":"#82b952","proactive":false,"volume":0.00556292,"textname":"undefined(SZ002614)","url":"/S/SZ002614"}],"rebalancing_histories":[],"comment":null,"diff":0,"new_buy_count":0},"last_rebalancing":{"id":18799564,"status":"success","cube_id":100230,"prev_bebalancing_id":18707532,"category":"sys_rebalancing","exe_strategy":"market_all","created_at":1466733333804,"updated_at":1466733333804,"cash_value":0.00732268,"cash":0.38,"error_code":null,"error_message":"你上一笔调仓已成交。","error_status":null,"holdings":[{"stock_id":1003442,"weight":7.68,"segment_name":"计算机","segment_id":368479,"stock_name":"任子行","stock_symbol":"SZ300311","segment_color":"#5588cc","proactive":false,"volume":0.0070131},{"stock_id":1000576,"weight":6.46,"segment_name":"纺织服装","segment_id":368485,"stock_name":"上海三毛","stock_symbol":"SH600689","segment_color":"#e05173","proactive":false,"volume":0.00605867},{"stock_id":1000689,"weight":3.68,"segment_name":"化工","segment_id":368481,"stock_name":"神马股份","stock_symbol":"SH600810","segment_color":"#5ea180","proactive":false,"volume":0.00701638},{"stock_id":1002023,"weight":4,"segment_name":"通信","segment_id":368480,"stock_name":"二六三","stock_symbol":"SZ002467","segment_color":"#5db15d","proactive":false,"volume":0.00608638},{"stock_id":1003506,"weight":5.64,"segment_name":"计算机","segment_id":368479,"stock_name":"赢时胜","stock_symbol":"SZ300377","segment_color":"#5588cc","proactive":false,"volume":0.00251646},{"stock_id":1002242,"weight":5.73,"segment_name":"纺织服装","segment_id":368485,"stock_name":"乔治白","stock_symbol":"SZ002687","segment_color":"#e05173","proactive":false,"volume":0.00758824},{"stock_id":1001653,"weight":3.84,"segment_name":"化工","segment_id":368481,"stock_name":"南岭民爆","stock_symbol":"SZ002096","segment_color":"#5ea180","proactive":false,"volume":0.0042203},{"stock_id":1001600,"weight":10.38,"segment_name":"建筑材料","segment_id":368482,"stock_name":"兔宝宝","stock_symbol":"SZ002043","segment_color":"#a4a461","proactive":false,"volume":0.01453194},{"stock_id":1003216,"weight":4.71,"segment_name":"计算机","segment_id":368479,"stock_name":"银之杰","stock_symbol":"SZ300085","segment_color":"#5588cc","proactive":false,"volume":0.00366429},{"stock_id":1000383,"weight":3.65,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"好当家","stock_symbol":"SH600467","segment_color":"#dbbd45","proactive":false,"volume":0.01574218},{"stock_id":1003280,"weight":9.2,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"量子高科","stock_symbol":"SZ300149","segment_color":"#dbbd45","proactive":false,"volume":0.01023093},{"stock_id":1001910,"weight":2.55,"segment_name":"传媒","segment_id":1800927,"stock_name":"天神娱乐","stock_symbol":"SZ002354","segment_color":"#9966dd","proactive":false,"volume":0.00061903},{"stock_id":1002137,"weight":5.88,"segment_name":"食品饮料","segment_id":368478,"stock_name":"好想你","stock_symbol":"SZ002582","segment_color":"#ecad32","proactive":false,"volume":0.00283583},{"stock_id":1002122,"weight":3.94,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"唐人神","stock_symbol":"SZ002567","segment_color":"#dbbd45","proactive":false,"volume":0.00584899},{"stock_id":1000944,"weight":4.49,"segment_name":"轻工制造","segment_id":368484,"stock_name":"喜临门","stock_symbol":"SH603008","segment_color":"#e0b256","proactive":false,"volume":0.0041209},{"stock_id":1001752,"weight":1.29,"segment_name":"计算机","segment_id":368479,"stock_name":"二三四五","stock_symbol":"SZ002195","segment_color":"#5588cc","proactive":false,"volume":0.00199125},{"stock_id":1000474,"weight":6.75,"segment_name":"房地产","segment_id":368483,"stock_name":"万家文化","stock_symbol":"SH600576","segment_color":"#d9633b","proactive":false,"volume":0.00681168},{"stock_id":1001847,"weight":5.31,"segment_name":"纺织服装","segment_id":368485,"stock_name":"星期六","stock_symbol":"SZ002291","segment_color":"#e05173","proactive":false,"volume":0.00645184},{"stock_id":1002169,"weight":4.44,"segment_name":"家用电器","segment_id":368476,"stock_name":"蒙发利","stock_symbol":"SZ002614","segment_color":"#82b952","proactive":false,"volume":0.00556292}],"rebalancing_histories":[],"comment":null,"diff":0,"new_buy_count":0},"last_success_rebalancing":{"id":18799564,"status":"success","cube_id":100230,"prev_bebalancing_id":18707532,"category":"sys_rebalancing","exe_strategy":"market_all","created_at":1466733333804,"updated_at":1466733333804,"cash_value":0.00732268,"cash":0.38,"error_code":null,"error_message":"你上一笔调仓已成交。","error_status":null,"holdings":[{"stock_id":1003442,"weight":7.68,"segment_name":"计算机","segment_id":368479,"stock_name":"任子行","stock_symbol":"SZ300311","segment_color":"#5588cc","proactive":false,"volume":0.0070131},{"stock_id":1000576,"weight":6.46,"segment_name":"纺织服装","segment_id":368485,"stock_name":"上海三毛","stock_symbol":"SH600689","segment_color":"#e05173","proactive":false,"volume":0.00605867},{"stock_id":1000689,"weight":3.68,"segment_name":"化工","segment_id":368481,"stock_name":"神马股份","stock_symbol":"SH600810","segment_color":"#5ea180","proactive":false,"volume":0.00701638},{"stock_id":1002023,"weight":4,"segment_name":"通信","segment_id":368480,"stock_name":"二六三","stock_symbol":"SZ002467","segment_color":"#5db15d","proactive":false,"volume":0.00608638},{"stock_id":1003506,"weight":5.64,"segment_name":"计算机","segment_id":368479,"stock_name":"赢时胜","stock_symbol":"SZ300377","segment_color":"#5588cc","proactive":false,"volume":0.00251646},{"stock_id":1002242,"weight":5.73,"segment_name":"纺织服装","segment_id":368485,"stock_name":"乔治白","stock_symbol":"SZ002687","segment_color":"#e05173","proactive":false,"volume":0.00758824},{"stock_id":1001653,"weight":3.84,"segment_name":"化工","segment_id":368481,"stock_name":"南岭民爆","stock_symbol":"SZ002096","segment_color":"#5ea180","proactive":false,"volume":0.0042203},{"stock_id":1001600,"weight":10.38,"segment_name":"建筑材料","segment_id":368482,"stock_name":"兔宝宝","stock_symbol":"SZ002043","segment_color":"#a4a461","proactive":false,"volume":0.01453194},{"stock_id":1003216,"weight":4.71,"segment_name":"计算机","segment_id":368479,"stock_name":"银之杰","stock_symbol":"SZ300085","segment_color":"#5588cc","proactive":false,"volume":0.00366429},{"stock_id":1000383,"weight":3.65,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"好当家","stock_symbol":"SH600467","segment_color":"#dbbd45","proactive":false,"volume":0.01574218},{"stock_id":1003280,"weight":9.2,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"量子高科","stock_symbol":"SZ300149","segment_color":"#dbbd45","proactive":false,"volume":0.01023093},{"stock_id":1001910,"weight":2.55,"segment_name":"传媒","segment_id":1800927,"stock_name":"天神娱乐","stock_symbol":"SZ002354","segment_color":"#9966dd","proactive":false,"volume":0.00061903},{"stock_id":1002137,"weight":5.88,"segment_name":"食品饮料","segment_id":368478,"stock_name":"好想你","stock_symbol":"SZ002582","segment_color":"#ecad32","proactive":false,"volume":0.00283583},{"stock_id":1002122,"weight":3.94,"segment_name":"农林牧渔","segment_id":368477,"stock_name":"唐人神","stock_symbol":"SZ002567","segment_color":"#dbbd45","proactive":false,"volume":0.00584899},{"stock_id":1000944,"weight":4.49,"segment_name":"轻工制造","segment_id":368484,"stock_name":"喜临门","stock_symbol":"SH603008","segment_color":"#e0b256","proactive":false,"volume":0.0041209},{"stock_id":1001752,"weight":1.29,"segment_name":"计算机","segment_id":368479,"stock_name":"二三四五","stock_symbol":"SZ002195","segment_color":"#5588cc","proactive":false,"volume":0.00199125},{"stock_id":1000474,"weight":6.75,"segment_name":"房地产","segment_id":368483,"stock_name":"万家文化","stock_symbol":"SH600576","segment_color":"#d9633b","proactive":false,"volume":0.00681168},{"stock_id":1001847,"weight":5.31,"segment_name":"纺织服装","segment_id":368485,"stock_name":"星期六","stock_symbol":"SZ002291","segment_color":"#e05173","proactive":false,"volume":0.00645184},{"stock_id":1002169,"weight":4.44,"segment_name":"家用电器","segment_id":368476,"stock_name":"蒙发利","stock_symbol":"SZ002614","segment_color":"#82b952","proactive":false,"volume":0.00556292}],"rebalancing_histories":[],"comment":null,"diff":0,"new_buy_count":0},"style":{"name":"小浪花","color0":"#4486ed","color1":"#4486ed","degree":30},"tag":null,"recommend_reason":null,"sale_flag":false,"sell_flag":false,"commission":null,"initial_capital":null,"listed_flag":false,"contractor_id":null,"contractor_name":null,"last_user_rb_gid":4005980,"owner":{"subscribeable":false,"common_count":0,"remark":null,"recommend_reason":null,"recommend":null,"followers_count":13,"friends_count":265,"st_color":"1","follow_me":false,"verified":false,"intro":null,"stock_status_count":null,"screen_name":"刹那与永恒","step":"three","blocking":false,"gender":"n","province":"北京","city":"城市/地区","blog_description":null,"verified_type":0,"verified_description":null,"last_status_id":73624647,"status_count":118,"donate_count":0,"allow_all_stock":false,"stocks_count":null,"domain":null,"name":null,"location":null,"id":9279819025,"type":"1","description":"一切有为法 如梦幻泡影 如露亦如电 应作如是观。          应无所住而生其心 无往无来亦无住\n反者道之动也 弱者道之用也\n无善无恶心之体 有善有恶意之动 知善知恶是良知 为善去恶是格物\nE=mc² 缘起性空 真空秒有 妙有贵无 无中生有","profile":"/9279819025","status":1,"following":false,"url":null,"profile_image_url":"community/20162/1459174837648-1459174838373.jpg,community/20162/1459174837648-1459174838373.jpg!180x180.png,community/20162/1459174837648-1459174838373.jpg!50x50.png,community/20162/1459174837648-1459174838373.jpg!30x30.png","group_ids":null,"name_pinyin":null,"screenname_pinyin":null,"photo_domain":"//xavatar.imedao.com/"},"performance":{"top_gainer_symbol":null,"top_gainer_name":null,"gain_count":0,"loss_count":0},"closed_at":null,"badges_exist":false,"sell_rebalancing":{"id":4005980,"status":"canceled","cube_id":100230,"prev_bebalancing_id":3967569,"category":"user_rebalancing","exe_strategy":"intraday_all","created_at":1431328441118,"updated_at":1431394274945,"cash_value":0.00732268,"cash":5.96,"error_code":null,"error_message":"你上一笔调仓已被取消。","error_status":"已取消","holdings":null,"rebalancing_histories":[{"id":20507588,"rebalancing_id":4005980,"stock_id":1000583,"stock_name":"匹凸匹","stock_symbol":"SH600696","volume":0,"price":null,"net_value":0,"weight":0,"target_weight":5,"prev_weight":null,"prev_target_weight":null,"prev_weight_adjusted":null,"prev_volume":null,"prev_price":null,"prev_net_value":null,"proactive":true,"created_at":1431328441118,"updated_at":1431328441118,"target_volume":0.00831651,"prev_target_volume":null},{"id":20507591,"rebalancing_id":4005980,"stock_id":1003506,"stock_name":"赢时胜","stock_symbol":"SZ300377","volume":0.00069633,"price":null,"net_value":0.1404,"weight":7,"target_weight":7,"prev_weight":12.32,"prev_target_weight":12.8,"prev_weight_adjusted":12.59,"prev_volume":0.00125209,"prev_price":191.28,"prev_net_value":0.23949977,"proactive":true,"created_at":1431328441118,"updated_at":1431328441118,"target_volume":0.00069633,"prev_target_volume":0.00130077}],"comment":null,"diff":10.12,"new_buy_count":1,"updated_at_format":"2015.5.11 15:14"},"created_date":"2015.01.03","created_date_format":"2015-01-03","close_date":"","authorized_visible":true}'
    #s.decode('utf-8', 'ignore')
    f = open('1.txt', 'w', encoding='utf-8')
    f.write(s)
    f.close()
    #print(get_last_crawled_cube_id())


if __name__ == '__main__':
    main()




